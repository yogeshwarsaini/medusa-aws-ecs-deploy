{"version":3,"file":"use-prompt.js","sourceRoot":"","sources":["../../../../src/hooks/use-prompt/use-prompt.tsx"],"names":[],"mappings":";AAAA,YAAY,CAAA;;;;AAEZ,qDAA8B;AAC9B,iCAA8B;AAC9B,6CAA6C;AAC7C,mDAAiE;AAIjE,MAAM,SAAS,GAAG,GAAG,EAAE;IACrB,MAAM,oBAAoB,GAAG,IAAA,cAAM,EAA0B,IAAI,CAAC,CAAA;IAElE,MAAM,MAAM,GAAG,KAAK,EAAE,KAAqB,EAAoB,EAAE;QAC/D,IAAI,oBAAoB,CAAC,OAAO,EAAE,CAAC;YACjC,OAAO,oBAAoB,CAAC,OAAO,CAAA;QACrC,CAAC;QAED,MAAM,aAAa,GAAG,IAAI,OAAO,CAAU,CAAC,OAAO,EAAE,EAAE;YACrD,IAAI,IAAI,GAAG,IAAI,CAAA;YACf,MAAM,SAAS,GAAG,IAAA,mBAAU,EAAC,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC,CAAA;YAE3D,MAAM,QAAQ,GAAG,GAAG,EAAE;gBACpB,IAAI,GAAG,KAAK,CAAA;gBACZ,SAAS,CAAC,OAAO,EAAE,CAAA;gBACnB,OAAO,CAAC,KAAK,CAAC,CAAA;gBACd,oBAAoB,CAAC,OAAO,GAAG,IAAI,CAAA;gBAEnC,gGAAgG;gBAChG,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,aAAa,GAAG,MAAM,CAAA;YAC5C,CAAC,CAAA;YAED,MAAM,SAAS,GAAG,GAAG,EAAE;gBACrB,IAAI,GAAG,KAAK,CAAA;gBACZ,OAAO,CAAC,IAAI,CAAC,CAAA;gBACb,SAAS,CAAC,OAAO,EAAE,CAAA;gBACnB,oBAAoB,CAAC,OAAO,GAAG,IAAI,CAAA;gBAEnC,gGAAgG;gBAChG,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,aAAa,GAAG,MAAM,CAAA;YAC5C,CAAC,CAAA;YAED,MAAM,MAAM,GAAG,GAAG,EAAE;gBAClB,SAAS,CAAC,MAAM,CACd,oBAAC,4BAAY,IACX,IAAI,EAAE,IAAI,EACV,SAAS,EAAE,SAAS,EACpB,QAAQ,EAAE,QAAQ,KACd,KAAK,GACT,CACH,CAAA;YACH,CAAC,CAAA;YAED,MAAM,EAAE,CAAA;QACV,CAAC,CAAC,CAAA;QAEF,oBAAoB,CAAC,OAAO,GAAG,aAAa,CAAA;QAC5C,OAAO,aAAa,CAAA;IACtB,CAAC,CAAA;IAED,OAAO,MAAM,CAAA;AACf,CAAC,CAAA;AAEQ,8BAAS","sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport { useRef } from \"react\"\nimport { createRoot } from \"react-dom/client\"\nimport { RenderPrompt, RenderPromptProps } from \"./render-prompt\"\n\ntype UsePromptProps = Omit<RenderPromptProps, \"onConfirm\" | \"onCancel\" | \"open\">\n\nconst usePrompt = () => {\n  const currentPromptPromise = useRef<Promise<boolean> | null>(null)\n\n  const prompt = async (props: UsePromptProps): Promise<boolean> => {\n    if (currentPromptPromise.current) {\n      return currentPromptPromise.current\n    }\n\n    const promptPromise = new Promise<boolean>((resolve) => {\n      let open = true\n      const mountRoot = createRoot(document.createElement(\"div\"))\n\n      const onCancel = () => {\n        open = false\n        mountRoot.unmount()\n        resolve(false)\n        currentPromptPromise.current = null\n\n        // TEMP FIX for Radix issue with dropdowns persisting pointer-events: none on body after closing\n        document.body.style.pointerEvents = \"auto\"\n      }\n\n      const onConfirm = () => {\n        open = false\n        resolve(true)\n        mountRoot.unmount()\n        currentPromptPromise.current = null\n\n        // TEMP FIX for Radix issue with dropdowns persisting pointer-events: none on body after closing\n        document.body.style.pointerEvents = \"auto\"\n      }\n\n      const render = () => {\n        mountRoot.render(\n          <RenderPrompt\n            open={open}\n            onConfirm={onConfirm}\n            onCancel={onCancel}\n            {...props}\n          />\n        )\n      }\n\n      render()\n    })\n\n    currentPromptPromise.current = promptPromise\n    return promptPromise\n  }\n\n  return prompt\n}\n\nexport { usePrompt }\n"]}